<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 1.01 Transitional//EN">
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ page contentType="text/html; charset=utf-8"%>
<%@ include file="/pages/commons/meta.jsp"%>
<%@ include file="/pages/commons/taglibs.jsp"%>
<%@page import="com.soc.model.user.User"%>
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>

<%
	String path = request.getContextPath();
	String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>
<html>

<head>
<%-- <script type="text/javascript" src="${ctx}/pushlet/ajax-pushlet-client.js"></script>--%>

<link href="${ctx}/styles/library.css" rel="stylesheet"
	type="text/css">
 <link href="${ctx}/styles/jquery-ui.custom.css" rel="stylesheet"
	type="text/css"> 
	<%-- <link href="${ctx}/styles/jquery-ui-1.8.21.css" rel="stylesheet" type="text/css"> --%>
<link href="${ctx}/styles/jquery.popuplayer.css" rel="stylesheet"
	type="text/css">
<link href="${ctx}/stylesalidationEngine.jquery.css" rel="stylesheet"
	type="text/css">
<link href="${ctx}/styles/fontColor.css" rel="stylesheet"
    type="text/css">
<script type='text/javascript' src="${ctx}/scripts/jquery-1.7.2.min.js"></script>
<script type='text/javascript'
	src="${ctx}/scripts/jquery.validationEngine-en.js"></script>
<script type='text/javascript'
	src="${ctx}/scripts/jquery.validationEngine.js"></script>
<script type='text/javascript'
	src="${ctx}/scripts/jquery-ui.custom.min.js"></script>
<script type='text/javascript' src="${ctx}/scripts/util.js"></script>
<script type='text/javascript' src="${ctx}/scripts/popuplayer.js"></script>
<%--||$("#eventLibraryName").html()=="" --%>
<script language="javascript">
function subData() {
	var rege =/^([^`~!@#$%^&*()=|{} \\\[\].<>\/?~！@#￥……&*（）—|{}【】。？])*$/;
	var rege1 =/^([^`~!@#$%^&*()=|{} \\\[\].<>\/?~！@#￥……&*（）—|{}【】。？])*$/;
	if($("#eventLibraryName").val()==""){
		alert('中文名称不能为空');
		return;
	}
	if($('#eventLibraryName').val().length>50){
		alert("中文名称长度不能大于50");
		$('#eventLibraryName').val('');
		$('#eventLibraryName').focus();
		return ;
	}
	if(!rege.test($('#eventLibraryName').val())){
		alert("输入的内容包含特殊字符，请重新输入");
		$('#eventLibraryName').val('');
		$('#eventLibraryName').focus();
		return;
	}
	if($('#deviceType').val().length>50){
		alert("设备类型长度不能大于50");
		$('#deviceType').val('');
		$('#deviceType').focus();
		return ;
	}
	if(!rege1.test($('#deviceType').val())){
		alert("输入的内容包含特殊字符，请重新输入");
		$('#deviceType').val('');
		$('#deviceType').focus();
		return;
	}
	if($('#cause').val().length>255){
		alert("摘要长度不能大于255");
		$('#cause').val('');
		$('#cause').focus();
		return ;
	}
	
	if($('#discription').val().length>255){
		alert("描述长度不能大于255");
		$('#discription').val('');
		$('#discription').focus();
		return ;
	}
	$("#saveEventLibrary").submit();
}

</script>
</head>

<body style="margin-top:2px;">
	<!--  主table-->
		<table width="70%" border="0" cellspacing="0" cellpadding="0"
			style="margin-left: 4px; margin-top: 0px">
			<tr>
				<!-- left area -->
				<td width="50%" valign="top">
					<!--  左侧table-->
					<div class="framDiv">
					<c:set value="1" var="root" />
										<c:set value="" var="resStr" />
										<s:property value="#session.XXX" />
						<table width="100%" border="0" cellspacing="1" cellpadding="0">
							<!-- 信息内容 -->
							<tr>
								<td class='r2titler' colspan='2'><b>${title }</b></td>
							</tr>

							<tr>
								<td>
								
								<s:form action="saveEventLibraryList.action" namespace="/vulnerability"
								method="post" id="saveEventLibrary" name="saveEventLibrary" theme="simple">
									<!-- 用户信息内容 -->
									<s:token></s:token>
									<table width="99%" border="0" align="center" cellspacing="0"
										cellpadding="0">
                                         <!-- 空行 -->
										<tr>
											<td width="20%"><input name="eventLibrary.eventLibraryType" type="hidden" value="${eventLibrary.eventLibraryType }"/></td>
										</tr>
										<tr>
											<td height="5px"><input id="detail" name="detail" type="hidden" value="${detail}"/>
												<s:property value="details"/>
											</td>
										</tr>
                                         
                                         <!-- 空行 -->
										<tr>
											<td class="td_detail_separator"></td>
										</tr>
										<!-- 事件编号 -->
										
										<tr>
										<td align="right"><span class="spanred">*</span>事件编号:</td>
										<td style="padding-left:8px;" align="left" width="80%"><input name="eventLibrary.eventLibraryId"
												value="${eventLibrary.eventLibraryId }" type="text" size="30"
												maxlength="255" style="width: 70%"
												readonly="readonly" />
												<input type="hidden" name="eventLibraryType" value="${eventLibraryType}"/>
												<span id="check_loginname_msg"></span></td>
										</tr>
                                         <!-- 空行 -->
										<tr>
											<td class="td_detail_separator"></td>
										</tr>
										<!-- 中文名称 -->
                                        <tr>
											<td align="right"><span class="spanred">*</span>中文名称:</td>
											<td style="padding-left:8px;" align="left">
												<input name="eventLibrary.eventLibraryName" value="${eventLibrary.eventLibraryName }"
												type="text" size="30" id="eventLibraryName" maxlength="255"
												style="width: 70%" <c:if test="${eventLibraryType == null}">readonly="readonly"</c:if> />
											</td>
										</tr>
										<!-- 空行 -->
										<tr>
											<td class="td_detail_separator"></td>
										</tr>
										<!-- 设备类型 -->
										<tr id="tr_password_1" >
											<td align="right"><span class="spanred">*</span>设备类型:</td>

											<td width="50%" align="left" style="padding-left:8px">
												<input type="text" name="eventLibrary.deviceType"
													 size="30"  style="width: 70%" id="deviceType"
													 value="${eventLibrary.deviceType }" <c:if test="${eventLibraryType == null}">readonly="readonly"</c:if> /> <span id="icon"></span> <span
													class="hand" title=""
													onclick="if(''!=''){alert('');}else{alert('强度无特别限制！');}">
												</span>
											</td>
											<td align="left"></td>
										</tr>
										<!-- 空行 -->
										<tr>
											<td class="td_detail_separator"></td>
										</tr>
										<tr id="tr_password_1" >
											<td align="right"><span class="spanred">*</span>摘要:</td>

											<td width="50%" align="left" style="padding-left:8px">
												<input type="text" name="eventLibrary.cause" id="cause"
													 size="30"  style="width: 70%"
													 value="${eventLibrary.cause }" <c:if test="${eventLibraryType == null}">readonly="readonly"</c:if> /> <span id="icon"></span> 
												
											</td>
											<td align="left"></td>
										</tr>

										<tr id="tr_password_2">
											<td></td>
											<td>
												<div id="message"></div></td>
										</tr>
										<!-- 空行 -->
										<tr id="tr_password_3">
											<td class="td_detail_separator"></td>
										</tr>

										<!-- 描述 -->
										<tr id="tr_password_4">
											<td align="right" valign="top" style="padding-top:8px"><span class="spanred">*</span>描述：</td>
											<td style="padding-left:8px" align="left">
												<textarea name="eventLibrary.discription" id="discription" rows="10" cols="50" style="width: 70%;" <c:if test="${eventLibraryType == null}">readonly="readonly"</c:if> >${eventLibrary.discription }</textarea>
											</td>
										</tr>
										<tr id="tr_password_5">
											<td height="2px"></td>
										</tr>
										<tr id="tr_password_5">
											<td height="2px"></td>
										</tr>
										

									</table>
									</s:form>
									</td>
							</tr>

							<!-- 空行 -->
							<tr>
								<td class="td_detail_separator"></td>
							</tr>
						</table>
						
					</div>
				</td>
			</tr>
		</table><br/>
		<table width="70%" border="0" cellspacing="0" cellpadding="0"
			style="margin-left: 4px;">
			<!-- 空行 -->
			<tr>
				<td class="td_detail_separator"></td>
			</tr>
			<tr>
				<td align="right"><input
					type="button" class="btnyh" id="btnSave" value="保  存"
					onclick="subData();" /> <input type="button" class="btnyh"
					id="btnCancel" value="取  消"
					onclick="history.back();" />
				</td>
			</tr>
		</table>
</body>
</html>
